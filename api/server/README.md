# Swagger generated server

## Overview
This server was generated by the [swagger-codegen](https://github.com/swagger-api/swagger-codegen)
project. By using the [OpenAPI-Spec](https://github.com/swagger-api/swagger-core/wiki) from a remote
server, you can easily generate a server stub. This is an example of building a Swagger-enabled
Flask server.

This example uses the [Connexion](https://github.com/zalando/connexion) library on top of Flask.

## MLX API Server Components Functions

| Python package/script  | Purpose |
| ------------- | ------------- |
| `code_templates`  | Code templates are used to generate sample Kubeflow pipeline DSL scripts for each asset type  |
| `controllers`  | Controllers are the code stubs (“interfaces”) for the API endpoints generated by Swagger  |
| `controllers_impl` | Controller implementation of the generated API code stubs (“interfaces”), originally copied from respective controller and then filled in with the actual business logic. API calls get forwards from the controllers to the controller_impl by injection of some code magic in util.py (see codegen.sh) |
| `data_access` | Contains 2 clients – MySQL (relational database) and Minio (object storage) for data access |
| `gateways` | Connects the API server to various services on the Kubernetes cluster like KFServing, Kubeflow Pipelines, and the Kubernetes API |
| `models` | Swagger generated API classes used to transfer data between API client and API server |
| `encoder.py` | Implementation of JSON encoder (generated by Swagger) |
| `util.py` | Collection of helper functions, most notably to “glue” the API `controllers` code stubs to the `controllers_impl` API implementations |


## Requirements
Python 3.6.1+

## Usage

To run the server, please execute the following from the root directory:

```
pip3 install -r requirements.txt
python3 -m swagger_server
```

Then open the following URL in your web browser:

```
http://localhost:8080/apis/v1alpha1/ui/
```

Your Swagger definition lives here:

```
http://localhost:8080/apis/v1alpha1/swagger.json
```

To launch the integration tests, use tox:
```
sudo pip install tox
tox
```

## Running with Docker

To run the server on a Docker container, please execute the following from the root directory:

```bash
# building the image
docker build -t swagger_server .

# starting up a container
docker run -p 8080:8080 swagger_server
```
